"use strict";angular.module("AutoFontSize",[]).directive("autoFontSize",["$window",function(){return{template:'<div data-role="inner" ng-transclude></div>',transclude:!0,link:{post:function(a,b,c){function d(){var c=0;if(null!==f()){k||(k=f());var d=f();if(i()&&m.shrink)for(;i()&&100>c&&f()>=m.minSize;)g(f()-1),c+=1;else if(j()&&m.grow){for(;j()&&100>c;)g(f()+1),c+=1;e()}else if(!i()&&h()){for(;!i()&&h()&&100>c;)g(f()+1),c+=1;e()}d!=f()&&a.$emit("auto-font-size:resized",{fontSize:f(),elem:b})}}function e(){i()&&g(f()-1)}function f(){var a=n.css("font-size"),b=a.match(/\d+/);return b?Number(b[0]):null}function g(a){n.css("fontSize",a+"px"),n.css("lineHeight",a+2+"px")}function h(){return f()<k}function i(){return n.width()>b.width()||n.height()>b.height()}function j(){return n.width()<b.width()||n.height()<b.height()}var k,l=a.$eval(c.autoFontSize)||{},m=angular.extend({shrink:!0,grow:!0,minSize:1},l),n=b.find("div[data-role]");a.$watch(d)}}}}]);